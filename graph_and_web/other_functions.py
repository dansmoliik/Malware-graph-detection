from __future__ import print_function
import sys
from os import path
import properties


def console_print(output):
    print(output, end="")


def is_number(s):
    try:
        float(s)
        return True
    except ValueError:
        return False


def swap_numbers(num1, num2):
    return num2, num1


def get_next_flow_index(curr_node, curr_index):
    next_index = sys.maxint
    for dst_node_name in curr_node.edges:
        edge = curr_node.edges[dst_node_name]
        for flow_index in edge.flows.keys():
            if flow_index <= curr_index:
                continue
            if flow_index == curr_index + 1:
                return flow_index
            if flow_index < next_index:
                next_index = flow_index
    return next_index


def error_exit_program(str_output):
    console_print(str_output)
    exit()


def file_exists(file_name):
    return path.isfile(file_name)


def check_if_file_exists(file_name):
    if not file_exists(file_name):
        error_exit_program(properties.ERROR_STR_FILE_NOT_EXIST.format(file_name))


def check_if_file_ends_with_ext(file_name, ext):
    if not file_name.endswith(ext):
        error_exit_program(properties.ERROR_STR_NOT_END_WITH_EXT
                           .format(file_name, ext))


def add_count_to_dict(dct, key, count_to_add):
    if key in dct:
        count = dct[key]
        count += count_to_add
    else:
        count = count_to_add
    dct[key] = count


def get_max_in_dict_and_its_ratio(dct):
    most_freq_key = ""
    most_freq_key_count = -1
    total_count = 0
    for key in dct:
        total_count += dct[key]
        if dct[key] > most_freq_key_count:
            most_freq_key = key
            most_freq_key_count = dct[key]
    most_freq_key_count_ratio = 0
    if total_count != 0:
        most_freq_key_count_ratio = float(most_freq_key_count )/ total_count * 100
    return most_freq_key, most_freq_key_count_ratio
